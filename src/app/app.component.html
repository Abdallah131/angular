<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" routerLink="/">E-Commerce</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" routerLink="/products">Products</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" (click)="toggleCart()" style="cursor: pointer">
            Cart
            <span class="cart-badge" *ngIf="cartItemCount > 0">{{
              cartItemCount
            }}</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div
  class="cart-overlay"
  [class.active]="isCartOpen"
  (click)="closeCart()"
></div>
<div class="cart-sidebar" [class.active]="isCartOpen">
  <div class="cart-header">
    <h3>Shopping Cart</h3>
    <button class="close-btn" (click)="closeCart()">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <div class="cart-body">
    <div *ngIf="cartItems.length === 0" class="empty-cart">
      <svg
        width="80"
        height="80"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1"
      >
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path
          d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
        ></path>
      </svg>
      <p>Your cart is empty</p>
      <button
        class="btn btn-primary"
        (click)="closeCart()"
        routerLink="/products"
      >
        Continue Shopping
      </button>
    </div>

    <div *ngIf="cartItems.length > 0" class="cart-items">
      <div class="cart-item" *ngFor="let item of cartItems">
        <img
          [src]="item.product.imageUrl"
          [alt]="item.product.name"
          class="item-image"
        />
        <div class="item-details">
          <h4>{{ item.product.name }}</h4>
          <p class="item-price">{{ item.product.price | currency }}</p>
          <div class="quantity-controls">
            <button (click)="decreaseQuantity(item.product.id)" class="qty-btn">
              -
            </button>
            <span class="quantity">{{ item.quantity }}</span>
            <button (click)="increaseQuantity(item.product.id)" class="qty-btn">
              +
            </button>
          </div>
        </div>
        <button class="remove-btn" (click)="removeItem(item.product.id)">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="3 6 5 6 21 6"></polyline>
            <path
              d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
            ></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="cart-footer" *ngIf="cartItems.length > 0">
    <div class="cart-total">
      <span>Total:</span>
      <span class="total-price">{{ getCartTotal() | currency }}</span>
    </div>
    <button class="btn btn-checkout">Proceed to Checkout</button>
    <button class="btn btn-clear" (click)="clearCart()">Clear Cart</button>
  </div>
</div>

<div class="container mt-4">
  <router-outlet></router-outlet>
</div>
